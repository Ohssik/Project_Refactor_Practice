@model prjMSIT145_Final.ViewModel.CBBusinessMemberViewModel

@{
    ViewData["Title"] = "BRevise";
    Layout = "_BusinessLayout";
}

<section class="shopinfocard" style="" >
    <div class="shopinfoarea p-0 m-0" style="height:365px;width:480px">
        <div class="shopinfo" style="height:280px;width:480px">
            <img class="Shoplogo p-0 m-0" src="/images/@Model.LogoImgFileName" onerror="this.src='@Url.Content("~/images/Customer/Mainpage/shibaLogo_row2.png")'" id="LogoImgFile">
            <div>
                <div class="shoptitle"id="showShopName" ></div>
                <div class="infoblock">
                    <div class="InfoArea">店家資訊</div>
                    <div class="InfoArea">

                        <p class="p-0 m-0"></p>
                    </div>
                    <div class="InfoArea"><img src="/images/Customer/ShowProduct/opentime 20x20.png"><p id="showopentime" class="p-0 m-0">@Model.OpenTime</p> <p class ="p-0 m-0">~</p> <p id="showclosetime" class="p-0 m-0">@Model.CloseTime</p> </div>
                    <div class="InfoArea"><img src="/images/Customer/ShowProduct/phone 20x20.png"><p id="showphone" class="p-0 m-0">@Model.Phone</p></div>
                    <div class="InfoArea"><img src="/images/Customer/ShowProduct/address 20x20.png"><p id="showaddress" class="p-0 m-0">@Model.Address</p></div>
                    <div class="InfoArea"><img src="/images/Customer/ShowProduct/paymentterm 20x20.png"><p id="showpaymentterm" class="p-0 m-0">現金、信用卡</p></div>
                </div>
            </div>
        </div>
        <div class="btnbar"style="height:85px;width:480px" >
            <div class="iconwrap">
                <div class="icon">
                    <img src="~/images/Customer/ShowProduct/service 24X24.png" />
                </div>
                <div class="btntext">問店家</div>
            </div>
            <div class="iconwrap">
                <img src="~/images/Customer/ShowProduct/Paw White.png" class="Midimg"/>
            </div>
            <div class="iconwrap">
                <img src="~/images/Customer/ShowProduct/Paw White.png" class="Midimg" />
            </div>
            <div class="iconwrap search">
                <div class="icon">
                    <img src="~/images/Customer/ShowProduct/search 24x24.png" />
                </div>
                <div class="btntext">找商品</div>
            </div>
        </div>
    </div>
    <section class="ADarea">
        <img class="Shopcardcover" src="~/images/@Model.SighImgFileName" id="SighImgFile" onerror="this.src='@Url.Content("~/images/Customer/Mainpage/shibaLogo_row2.png")'">
        
    </section>
</section>
<div class="p-3 m-3"></div>
<div>
   
        <div class="container h-100 w-100 ">
        <div class="row d-flex justify-content-center align-items-center h-100 ">
                <div class="">
              
                            <h3 class="mb-4 pb-2 pb-md-0 mb-md-5 px-md-2">基本資料</h3>

                                <form asp-action="BRevise" enctype="multipart/form-data">
                                <div class="row">
                                <div class="form-group col-6">
                                 <label asp-for="Email" class="control-label"></label>
                                 <input asp-for="Email" class="form-control" readonly="readonly" />
                                 <span asp-validation-for="Email" class="text-danger"></span>
                                 </div> 
                                <div class="form-group col-6">
                                  <label asp-for="Password" class="control-label"></label>
                                  <input asp-for="Password" class="form-control" id="Passwordinput" />
                                  <span asp-validation-for="Password" class="text-secondary" id="Passwordspan">請混合使用 8~16 個字元以上的大小寫英文字母、數字</span>

                                 </div>
                                </div>

                                <div class="row">
                                  <div class="form-group col-6">
                                   <label asp-for="MemberName" class="control-label"></label>
                                   <input asp-for="MemberName" class="form-control" id="MemberNameinput" />
                                   <span asp-validation-for="MemberName" class="text-danger"></span>
                                 </div>
                                 <div class="form-group col-md-6 ">
                                <label asp-for="ContactPerson" class="control-label"></label>
                                <input asp-for="ContactPerson" class="form-control" id="ContactPersoninput" />
                                <span asp-validation-for="ContactPerson" class="text-danger" id="ContactPersonspan"></span>
                                 
                                   </div>
                                </div>
                                

                                <div class="row">
                                    <div class="form-group col-6">
                                        <label asp-for="ShopType" class="control-label"></label>
                                        <input asp-for="ShopType" class="form-control" id="ShopTypeinput" />
                                        <span asp-validation-for="ShopType" class="text-danger" id="ShopTypespan"></span>
                                    </div>
                                    <div class="form-group col-6">
                                        <label asp-for="Brand" class="control-label"></label>
                                        <input asp-for="Brand" class="form-control" id="Brandinput" />
                                        <span asp-validation-for="Brand" class="text-danger"></span>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label asp-for="Phone" class="control-label"></label>
                                    <input asp-for="Phone" class="form-control" type="number" id="Phoneinput" />
                                    <span asp-validation-for="Phone" class="text-danger" id="Phonespan"></span>

                                </div>

                                <div class="form-group">
                                    <label asp-for="Address" class="control-label"></label>
                                    <input asp-for="Address" class="form-control" id="Addressinput" />
                                    <span asp-validation-for="Address" class="text-danger"></span>

                                </div>

                               
                                <div class="row">
                                    <div class="form-group col-6">
                                        <label asp-for="OpenTime" class="control-label"></label>
                                        <input asp-for="OpenTime" class="form-control" type="time" value="08:00" id="OpenTimeinput" />
                                        <span asp-validation-for="OpenTime" class="text-danger"></span>

                                    </div>
                                    <div class="form-group col-6">
                                        <label asp-for="CloseTime" class="control-label"></label>
                                        <input asp-for="CloseTime" class="form-control" type="time" value="20:00" id="CloseTimeinput" />
                                        <span asp-validation-for="CloseTime" class="text-danger"></span>
                                    </div>
                                </div>
                                @*照片相關*@
                                 <div>
                                  <label asp-for="LogoImgFile" class="control-label"></label>
                        <input asp-for="LogoImgFile" class="form-control" type="file" value="file" targetID="LogoImgFile" onchange="readURL(this)" />
                                  <span asp-validation-for="LogoImgFile" class="text-danger"></span>
                                 </div>
                                  <div>
                                  <label asp-for="SighImgFile" class="control-label"></label>
                        <input asp-for="SighImgFile" class="form-control" type="file" value="file" targetID="SighImgFile" onchange="readURL(this)" />
                                  <span asp-validation-for="SighImgFile" class="text-danger"></span>
                                   </div>
                                @*   <div>
                                  <label asp-for="BannerImg1File" class="control-label"></label>
                        <input asp-for="BannerImg1File" class="form-control" type="file" value="" id="BannerImg1Fileinput" />
                                  <span asp-validation-for="BannerImg1File" class="text-danger"></span>
                                  </div>
                                 <div>
                                 <label asp-for="BannerImg2File" class="control-label"></label>
                        <input asp-for="BannerImg2File" class="form-control" type="file" value="" id="BannerImg2Fileinput" />
                                  <span asp-validation-for="BannerImg2File" class="text-danger"></span>
                                 </div>
                    <div>
                        <label asp-for="BannerImg3File" class="control-label"></label>
                        <input asp-for="BannerImg3File" class="form-control" type="file" value="08:00" id="BannerImg3Fileinput" />
                        <span asp-validation-for="BannerImg3File" class="text-danger"></span>
                    </div>*@








                                @*隱藏欄位*@
                                <div class="form-group" hidden>
                                    <label asp-for="Fid" class="control-label"></label>
                                    <input asp-for="Fid" class="form-control" />

                                </div>          
                                <div class="form-group">
                        <div class="form-group" hidden>
                            <label asp-for="Gps" class="control-label"></label>
                            <input asp-for="Gps" class="form-control" />
                            <span asp-validation-for="Gps" class="text-danger"></span>
                        </div>
                        @*img*@
                        <div class="form-group" hidden>
                            <label asp-for="ImgFid" class="control-label"></label>
                            <input asp-for="ImgFid" class="form-control" />
                            <span asp-validation-for="ImgFid" class="text-danger"></span>
                        </div>

                        <div class="form-group" hidden>
                            <label asp-for="BFid" class="control-label"></label>
                            <input asp-for="BFid" class="form-control" />
                            <span asp-validation-for="BFid" class="text-danger"></span>
                        </div>
                        @*按鈕*@
                                    <input id="Sibmitbutton" type="button" value="儲存" class="btn btn-primary mt-2" />
                                    <span id="Sibmitvalidation" class="text-danger"></span>
                                </div>
                            </form>
                            <div>
                                
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>

@section Scripts {
    <link href="~/css/Customer_css/CBSonlyClass.css" rel="stylesheet" />
    <link href="~/css/Customer_css/CShowProduct.css" rel="stylesheet" />
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        //顯示相關的原素
        const showShopName = document.getElementById("showShopName");
        const showopentime = document.getElementById("showopentime");
        const showclosetime = document.getElementById("showclosetime");
        const showaddress = document.getElementById("showaddress");
        const showpaymentterm = document.getElementById("showpaymentterm");
        const showphone = document.getElementById("showphone");
        //送出按鈕
        const Sibmitbutton = document.getElementById("Sibmitbutton");
        //input相關的原素
        const Passwordinput = document.getElementById("Passwordinput");
        const MemberNameinput = document.getElementById("MemberNameinput");
        const ShopTypeinput = document.getElementById("ShopTypeinput");
        const Brandinput = document.getElementById("Brandinput");
        const Phoneinput = document.getElementById("Phoneinput");
        const Addressinput = document.getElementById("Addressinput");
        const ContactPersoninput = document.getElementById("ContactPersoninput");
        const OpenTimeinput = document.getElementById("OpenTimeinput");
        const CloseTimeinput = document.getElementById("CloseTimeinput");
        //錯誤提醒
        const Passwordspan = document.getElementById("Passwordspan");
        const ShopTypespan = document.getElementById("ShopTypespan");
        const Phonespan = document.getElementById("Phonespan");
        const ContactPersonspan = document.getElementById("ContactPersonspan");
        const Sibmitvalidation = document.getElementById("Sibmitvalidation");
        //正規表達式
        const Passwordvalidation = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,16}$/;
        const Phonevalidation = /^0\d{1,3}-\d{5,8}$/;
        const CellPhonevalidation = /^09[0-9]{2}-[0-9]{6}$/;
        const ContactPersonvalidation = /[\u4E00-\u9FFF]+/g;

        var Passwordresult = "ok";
        var Phoneresult = "ok";
        var ShopTyperesult = "ok";
        var ContactPersonrsult = "ok";
        //驗證密碼
        function Passwordtest() {
            if (Passwordvalidation.test(Passwordinput.value)) {
                Passwordspan.innerHTML = "請混合使用 8~16 個字元以上的大小寫英文字母、數字";
                Passwordspan.setAttribute("class", "text-secondary");
                Passwordresult = "ok";
            }
            else {
                Passwordspan.innerHTML = "格式錯誤  請混合使用 8~16 個字元以上的大小寫英文字母、數字";
                Passwordspan.setAttribute("class", "text-danger");
                Passwordresult = "";
            }
        };
        Passwordinput.addEventListener('change', Passwordtest);

        //送出前驗證
        Sibmitbutton.addEventListener('click',function(){
        if (Passwordinput.value == "" || MemberNameinput.value == "" || ShopTypeinput.value == "" || Brandinput.value == "" || Phoneinput.value == ""
            || Addressinput.value == "" || ContactPersoninput.value == "" || OpenTimeinput.value == "" || CloseTimeinput.value == "" || Passwordresult == "" ) {
                console.log("Passwordinput.value" + Passwordinput.value)
                console.log("MemberNameinput.value" + MemberNameinput.value)
                console.log("Brandinput.value" + Brandinput.value)
                console.log("Phoneinput.value" + Phoneinput.value)
                console.log("Addressinput.value" + Addressinput.value)
                                  console.log("ContactPersoninput.value" + ContactPersoninput.value)
                    console.log("OpenTimeinput.value" + OpenTimeinput.value)
                                      console.log("CloseTimeinput.value" + CloseTimeinput.value)
                                        console.log("Passwordresult.value" + Passwordresult.value)



            Sibmitvalidation.innerHTML="請輸入所有選項並且確認格式";
            return;
            };
            alert("儲存成功");
            Sibmitbutton.setAttribute('type', "submit");

            
    });
        MemberNameinput.addEventListener('change',function()
        {
            showShopName.innerHTML = MemberNameinput.value;
        });
        OpenTimeinput.addEventListener('change', function () {
            showopentime.innerHTML = OpenTimeinput.value;
        });
        CloseTimeinput.addEventListener('change', function () {
            showclosetime.innerHTML = CloseTimeinput.value;
        });

        Addressinput.addEventListener('change', function () {
            showaddress.innerHTML = Addressinput.value;
        });
        Phoneinput.addEventListener('change', function () {
            showphone.innerHTML = Phoneinput.value;
        });
        //照片更換
        function readURL(input){

        if(input.files && input.files[0])
        {

         var imageTagID = input.getAttribute("targetID");

         var reader = new FileReader();

        reader.onload = function (e) 
        {

         var img = document.getElementById(imageTagID);

        img.setAttribute("src", e.target.result)

       }

    reader.readAsDataURL(input.files[0]);

  }

}


    </script>
}
