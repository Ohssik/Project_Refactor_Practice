@model List<prjMSIT145_Final.ViewModels.COrderDetialViewModel>
@{
    Layout = "_CustomerLayout";
    ViewData["Title"] = "List";
}

@section Styles{
    <style>

        .pic_Div {
            width: 100%;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .pic {
            height: 80px;
            width: 80px;
        }

            .pic img {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                object-fit: cover;
                overflow: hidden;
                margin: 0;
            }

        .state_timeDiv {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
        }

        .state {
            height: 40px;
            width: 90px;
            font-size: 15px;
            border-radius: 10px;
            background-color: rgb(243, 206, 206);
            box-sizing: border-box;
            padding: 10px 0;
            color: #FFFFFF;
            font-weight: 600;
        }

        .backgroundcolor1 {
            background-color: #ffb700;
        }

        .backgroundcolor2 {
            background-color: #595757
        }

        .backgroundcolor3 {
            background-color: #3aa6d9;
        }
        .backgroundcolor4 {
            background-color: #80d330;
        }

        .backgroundcolor5 {
            background-color: red
        }

        .column {
            display: flex;
            flex-direction: column;
            align-content: space-between;
        }

        h4 {
            margin: 10px;
        }

        p {
            margin: 8px;
        }

        a:link {
            text-align: center;
        }

        .padding {
            box-sizing: border-box;
            padding: 10px;
        }

        .main {
            margin: 10px auto;
            max-width: 70%;
            height: 100%;
        }

        .divCenter {
            display: flex;
            flex-wrap: wrap;
        }

        .margin {
            margin: 40px 0;
        }

        .select {
            display: flex;
            width: 500px;
            height: 50px;
            font-size: 20px;
        }

            .select select {
                font-size: 16px;
                margin-left: 50px;
                width: 300px;
                height: 30px;
            }

        .cartDiv {
            width: 380px;
            height: 250px;
            border-width: 1px;
            border-style: solid;
            position: relative;
            border-radius: 10px;
            margin: 10px;
            text-align: center;
            font-size: 20px;
        }

        .btnDiv {
            height: 50px;
            width: 50px;
            display: flex;
            position: absolute;
            bottom: 5px;
            right: 5px;
        }

            .btnDiv button {
                height: 100%;
                width: 100%;
                border: 1px solid;
                background-color: transparent;
            }

        .linkTrash {
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            text-align: center;
            padding: 15px 0;
        }

        .topBorder {
            border-top: 1px solid;
            border-color: #9F4E27;
        }

        a:link {
            text-decoration: none;
        }



        a:hover {
            color: gray;
        }

        a:active {
            background-color: rgb(235, 230, 230);
        }

        .body_Icon_delete_Guide_fontColor {
            color: rgb(79, 69, 79);
        }

        .button_Icon_Guide_BackGroundColor {
            background-color: rgb(250, 250, 248);
        }

        .cardBorderColor {
            border-color: #9F4E27
        }

        .cardBackgroundColor {
            /* background-color: rgb(255, 251, 217); */
            background-color: white
        }



        .card_Guide_FontColor {
            color: #9F4E27;
            font-weight: 600;
            font-size: 26px;
        }



        .mainDiv {
            position: relative;
            width: 45%;
            margin: 10px auto;
            /* z-index: 0; */
        }

        .flexAndItemsCenter {
            width: 100%;
            display: flex;
            align-items: center;
        }

        h4, h5, h6 {
            margin: 5px 0;
            color: #9F4E27;
            font-size: 22px;
        }

        .Fieldset {
            border-radius: 10px;
            color: gray;
            height: 30px;
            margin: 10px 0;
            font-size: 10px;
            border: 1px solid gray;
        }

        .spanFont {
            font-size: 10px;
        }

        .exclamation {
            box-sizing: border-box;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background-color: rgb(251, 86, 86);
            text-align: center;
            padding: 2px 0;
            margin-right: 15px;
        }

        .exclamationDiv {
            box-sizing: border-box;
            height: 30px;
            background-color: rgb(253, 219, 224);
            border-radius: 10px;
            padding: 0 5px;
        }

        .orderTime {
            font-size: 16px;
            color: #9F4E27;
            font-weight: 600;
        }
    </style>
}

    <div class="bodyBackgroundColor">

        <div class="backgroundDiv">
            <div class="main">
                <form action="">
                    <div class="margin select card_Guide_FontColor">
                        <span>訂單狀態</span>
                        <div>
                            <select name="orderState" id="slt1">
                                <option value="tab_">全部</option>
                                <option value="tab_1">未接單</option>
                                <option value="tab_2">商家準備中</option>
                                <option value="tab_3">商品準備完成</option>
                                <option value="tab_4">訂單已完成</option>
                                <option value="tab_5">取消</option>
                                <option value="tab_6">揪團失敗</option>
                            </select>
                        </div>
                    </div>
                </form>
                <div class="divCenter ">
                    @{
                    int count = 0;
                    foreach (var item in Model)
                    {
                        count++;
                            @if (item.OrderState != "")
                        {
                                @if (item.OrderState == "未接單")
                            {
                                    <!-- *****動態產生****至140行為止 -->
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_1" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor1" name="tab_1">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor ">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                            else if (item.OrderState == "商家準備中")
                            {
                                    <!-- *****動態產生****至140行為止 -->
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_2" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor2">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                            else if (item.OrderState == "商品準備完成")
                            {
                                    <!-- *****動態產生****至140行為止 -->
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_3" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor3">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                            else if (item.OrderState == "訂單已完成")
                            {
                                    <!-- *****動態產生****至140行為止 -->
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_4" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor4">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                            else if (item.OrderState == "商家退單")
                            {
                                    <!-- *****動態產生****至140行為止 -->
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_5" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor5">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                            else
                            {
                                    <div class="cartDiv cardBorderColor cardBackgroundColor padding" id="Click @item.Fid" name="tab_6" style="margin-right:40px">
                                        <div class="state_timeDiv">
                                            <!-- 背景色依狀態更改: -->
                                            <div class="state backgroundcolor5">@item.OrderState</div>
                                            <div id="orderTime" class="orderTime">@item.OrderTime</div>
                                        </div>
                                        <div class="column">
                                            <div class="pic_Div">
                                                <div class="pic">
                                                    <img src="~/images/@item.LogoImgFileName" />
                                                </div>
                                            </div>
                                            <div class="">
                                                <h4 class="card-title">@item.BMemberName</h4>
                                                <div class="topBorder">
                                                    <p class="card-text card_Guide_FontColor">共 @Convert.ToInt32(item.TotalAmount) 元</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            }
                        }

                    }
                }
            </div>
        </div>
    </div>
    <!-- JavaScript Bundle with Popper -->

    <script src="@Url.Content("~/js/jquery-3.6.2.js")"></script>
    <script>

        @foreach (var item in Model)
        {
            @:document.getElementById("Click @(item.Fid)").addEventListener('click', function () {

            @:window.location.href="ListInfo/?Fid=@(item.Fid)";

            @:});

        };


        $(function () {
            //全部選擇隱藏
            //$('div[id^="tab_"]').hide();
            $('#slt1').change(function () {
                let sltValue = $(this).val();
                console.log(sltValue);

                $('div[name^="tab_"]').hide();
                //指定選擇顯示
                $(`div[name^="${sltValue}"]`).show();
                $(sltValue).show();
            });

            $('[name="orderState"]').change(function(){
                let shellHeight = $('#shell').height();
                let windowHeight = $(window).height() - 90;

                if (windowHeight < shellHeight) {
                    $('.Copyright').removeClass('fixed_footer');
                }
                else {
                    $('.Copyright').addClass('fixed_footer');
                }
            });
            
        });




    </script>

</div>

